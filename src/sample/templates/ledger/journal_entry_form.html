{% extends "base.html" %}
{% load static %}
{% load django_bootstrap5 %}

{% block main %}

<head>
  <script src="{% static 'javascript/journal_entry_form.js' %}"></script>
</head>

<h2>仕訳登録・編集</h2>
<form method="post">
  {% csrf_token %}

  <h2>ヘッダー情報</h2>
  {% bootstrap_form form %}
  {{ form.errors }}

  <div class="journal-lines">
    <div id="debit-lines-container">
      <h3>借方行</h3>
      {{ debit_formset.management_form }}
      {% for debit_form in debit_formset %}
      <div class="journal-line">
        <!-- {{ debit_form.as_p }} -->
        {% bootstrap_form debit_form %}
        <!-- {{ debit_form.errors }} -->
        <button type="button" class="remove-line-button">行を削除</button>
      </div>
      {% endfor %}

      <!-- empty_form テンプレート（Django の __prefix__ が入っている） -->
      <div class="empty-form-template" style="display:none;">
        {% bootstrap_form debit_formset.empty_form %}
      </div>

      {% bootstrap_button button_type="button" content="借方を追加" id="add-debit-button" %}
    </div>

    <div id="credit-lines-container">
      <h3>貸方行</h3>
      {{ credit_formset.management_form }}
      {% for credit_form in credit_formset %}
      <div class="journal-line">
        {% bootstrap_form credit_form %}
        <!-- {{ credit_form.errors }} -->
        <button type="button" class="remove-line-button">行を削除</button>
        <!-- {% bootstrap_button button_type="button" content="行を削除" class="remove-line-button" %} -->
      </div>
      {% endfor %}

      <!-- empty_form テンプレート -->
      <div class="empty-form-template" style="display:none;">
        {% bootstrap_form credit_formset.empty_form %}
      </div>

      {% bootstrap_button button_type="button" content="貸方を追加" id="add-credit-button" %}
    </div>
  </div>

  {% bootstrap_button button_type="submit" content="保存" %}
</form>

{% endblock %}

<!-- {% block script %}
<script src="{% static 'javascript/journal_entry_form.js' %}"></script>
{% endblock %} -->